var nt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Rt=nt((Tt,fe)=>{var it=Object.defineProperty,y=(e,t)=>it(e,"name",{value:t,configurable:!0}),_e=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});function ke(e){return!isNaN(parseFloat(e))&&isFinite(e)}y(ke,"_isNumber");function L(e){return e.charAt(0).toUpperCase()+e.substring(1)}y(L,"_capitalize");function ne(e){return function(){return this[e]}}y(ne,"_getter");var q=["isConstructor","isEval","isNative","isToplevel"],z=["columnNumber","lineNumber"],H=["fileName","functionName","source"],ot=["args"],st=["evalOrigin"],J=q.concat(z,H,ot,st);function P(e){if(e)for(var t=0;t<J.length;t++)e[J[t]]!==void 0&&this["set"+L(J[t])](e[J[t]])}y(P,"StackFrame");P.prototype={getArgs:function(){return this.args},setArgs:function(e){if(Object.prototype.toString.call(e)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof P)this.evalOrigin=e;else if(e instanceof Object)this.evalOrigin=new P(e);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",r=this.getColumnNumber()||"",s=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+r+")":"[eval]:"+t+":"+r:s?s+" ("+e+":"+t+":"+r+")":e+":"+t+":"+r}};P.fromString=y(function(e){var t=e.indexOf("("),r=e.lastIndexOf(")"),s=e.substring(0,t),o=e.substring(t+1,r).split(","),i=e.substring(r+1);if(i.indexOf("@")===0)var n=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(i,""),l=n[1],a=n[2],u=n[3];return new P({functionName:s,args:o||void 0,fileName:l,lineNumber:a||void 0,columnNumber:u||void 0})},"StackFrame$$fromString");for($=0;$<q.length;$++)P.prototype["get"+L(q[$])]=ne(q[$]),P.prototype["set"+L(q[$])]=function(e){return function(t){this[e]=!!t}}(q[$]);var $;for(C=0;C<z.length;C++)P.prototype["get"+L(z[C])]=ne(z[C]),P.prototype["set"+L(z[C])]=function(e){return function(t){if(!ke(t))throw new TypeError(e+" must be a Number");this[e]=Number(t)}}(z[C]);var C;for(U=0;U<H.length;U++)P.prototype["get"+L(H[U])]=ne(H[U]),P.prototype["set"+L(H[U])]=function(e){return function(t){this[e]=String(t)}}(H[U]);var U,oe=P;function Oe(){var e=/^\s*at .*(\S+:\d+|\(native\))/m,t=/^(eval@)?(\[native code])?$/;return{parse:y(function(r){if(r.stack&&r.stack.match(e))return this.parseV8OrIE(r);if(r.stack)return this.parseFFOrSafari(r);throw new Error("Cannot parse given Error object")},"ErrorStackParser$$parse"),extractLocation:y(function(r){if(r.indexOf(":")===-1)return[r];var s=/(.+?)(?::(\d+))?(?::(\d+))?$/,o=s.exec(r.replace(/[()]/g,""));return[o[1],o[2]||void 0,o[3]||void 0]},"ErrorStackParser$$extractLocation"),parseV8OrIE:y(function(r){var s=r.stack.split(`
`).filter(function(o){return!!o.match(e)},this);return s.map(function(o){o.indexOf("(eval ")>-1&&(o=o.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var i=o.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),n=i.match(/ (\(.+\)$)/);i=n?i.replace(n[0],""):i;var l=this.extractLocation(n?n[1]:i),a=n&&i||void 0,u=["eval","<anonymous>"].indexOf(l[0])>-1?void 0:l[0];return new oe({functionName:a,fileName:u,lineNumber:l[1],columnNumber:l[2],source:o})},this)},"ErrorStackParser$$parseV8OrIE"),parseFFOrSafari:y(function(r){var s=r.stack.split(`
`).filter(function(o){return!o.match(t)},this);return s.map(function(o){if(o.indexOf(" > eval")>-1&&(o=o.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),o.indexOf("@")===-1&&o.indexOf(":")===-1)return new oe({functionName:o});var i=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=o.match(i),l=n&&n[1]?n[1]:void 0,a=this.extractLocation(o.replace(i,""));return new oe({functionName:l,fileName:a[0],lineNumber:a[1],columnNumber:a[2],source:o})},this)},"ErrorStackParser$$parseFFOrSafari")}}y(Oe,"ErrorStackParser");var at=new Oe,lt=at,I=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&!process.browser,xe=I&&typeof fe<"u"&&typeof fe.exports<"u"&&typeof _e<"u"&&typeof __dirname<"u",ct=I&&!xe,ut=typeof Deno<"u",Pe=!I&&!ut,dt=Pe&&typeof window=="object"&&typeof document=="object"&&typeof document.createElement=="function"&&typeof sessionStorage=="object"&&typeof importScripts!="function",ft=Pe&&typeof importScripts=="function"&&typeof self=="object";typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")>-1;var Me,ae,Re,we,pe;async function me(){if(!I||(Me=(await import("./__vite-browser-external-9wXp6ZBx.js")).default,we=await import("./__vite-browser-external-9wXp6ZBx.js"),pe=await import("./__vite-browser-external-9wXp6ZBx.js"),Re=(await import("./__vite-browser-external-9wXp6ZBx.js")).default,ae=await import("./__vite-browser-external-9wXp6ZBx.js"),ye=ae.sep,typeof _e<"u"))return;let e=we,t=await import("./__vite-browser-external-9wXp6ZBx.js"),r=await import("./__vite-browser-external-9wXp6ZBx.js"),s=await import("./__vite-browser-external-9wXp6ZBx.js"),o={fs:e,crypto:t,ws:r,child_process:s};globalThis.require=function(i){return o[i]}}y(me,"initNodeModules");function Ae(e,t){return ae.resolve(t||".",e)}y(Ae,"node_resolvePath");function Te(e,t){return t===void 0&&(t=location),new URL(e,t).toString()}y(Te,"browser_resolvePath");var le;I?le=Ae:le=Te;var ye;I||(ye="/");function Ne(e,t){return e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")?{response:fetch(e)}:{binary:pe.readFile(e).then(r=>new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}}y(Ne,"node_getBinaryResponse");function Ie(e,t){let r=new URL(e,location);return{response:fetch(r,t?{integrity:t}:{})}}y(Ie,"browser_getBinaryResponse");var Z;I?Z=Ne:Z=Ie;async function Fe(e,t){let{response:r,binary:s}=Z(e,t);if(s)return s;let o=await r;if(!o.ok)throw new Error(`Failed to load '${e}': request failed.`);return new Uint8Array(await o.arrayBuffer())}y(Fe,"loadBinaryFile");var X;if(dt)X=y(async e=>await import(e),"loadScript");else if(ft)X=y(async e=>{try{globalThis.importScripts(e)}catch(t){if(t instanceof TypeError)await import(e);else throw t}},"loadScript");else if(I)X=Le;else throw new Error("Cannot determine runtime environment");async function Le(e){e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")?Re.runInThisContext(await(await fetch(e)).text()):await import(Me.pathToFileURL(e).href)}y(Le,"nodeLoadScript");async function je(e){if(I){await me();let t=await pe.readFile(e,{encoding:"utf8"});return JSON.parse(t)}else return await(await fetch(e)).json()}y(je,"loadLockFile");async function De(){if(xe)return __dirname;let e;try{throw new Error}catch(s){e=s}let t=lt.parse(e)[0].fileName;if(I&&!t.startsWith("file://")&&(t=`file://${t}`),ct){let s=await import("./__vite-browser-external-9wXp6ZBx.js");return(await import("./__vite-browser-external-9wXp6ZBx.js")).fileURLToPath(s.dirname(t))}let r=t.lastIndexOf(ye);if(r===-1)throw new Error("Could not extract indexURL path from pyodide module location");return t.slice(0,r)}y(De,"calculateDirname");function $e(e){let t=e.FS,r=e.FS.filesystems.MEMFS,s=e.PATH,o={DIR_MODE:16895,FILE_MODE:33279,mount:function(i){if(!i.opts.fileSystemHandle)throw new Error("opts.fileSystemHandle is required");return r.mount.apply(null,arguments)},syncfs:async(i,n,l)=>{try{let a=o.getLocalSet(i),u=await o.getRemoteSet(i),d=n?u:a,h=n?a:u;await o.reconcile(i,d,h),l(null)}catch(a){l(a)}},getLocalSet:i=>{let n=Object.create(null);function l(d){return d!=="."&&d!==".."}y(l,"isRealDir");function a(d){return h=>s.join2(d,h)}y(a,"toAbsolute");let u=t.readdir(i.mountpoint).filter(l).map(a(i.mountpoint));for(;u.length;){let d=u.pop(),h=t.stat(d);t.isDir(h.mode)&&u.push.apply(u,t.readdir(d).filter(l).map(a(d))),n[d]={timestamp:h.mtime,mode:h.mode}}return{type:"local",entries:n}},getRemoteSet:async i=>{let n=Object.create(null),l=await pt(i.opts.fileSystemHandle);for(let[a,u]of l)a!=="."&&(n[s.join2(i.mountpoint,a)]={timestamp:u.kind==="file"?(await u.getFile()).lastModifiedDate:new Date,mode:u.kind==="file"?o.FILE_MODE:o.DIR_MODE});return{type:"remote",entries:n,handles:l}},loadLocalEntry:i=>{let n=t.lookupPath(i).node,l=t.stat(i);if(t.isDir(l.mode))return{timestamp:l.mtime,mode:l.mode};if(t.isFile(l.mode))return n.contents=r.getFileDataAsTypedArray(n),{timestamp:l.mtime,mode:l.mode,contents:n.contents};throw new Error("node type not supported")},storeLocalEntry:(i,n)=>{if(t.isDir(n.mode))t.mkdirTree(i,n.mode);else if(t.isFile(n.mode))t.writeFile(i,n.contents,{canOwn:!0});else throw new Error("node type not supported");t.chmod(i,n.mode),t.utime(i,n.timestamp,n.timestamp)},removeLocalEntry:i=>{var n=t.stat(i);t.isDir(n.mode)?t.rmdir(i):t.isFile(n.mode)&&t.unlink(i)},loadRemoteEntry:async i=>{if(i.kind==="file"){let n=await i.getFile();return{contents:new Uint8Array(await n.arrayBuffer()),mode:o.FILE_MODE,timestamp:n.lastModifiedDate}}else{if(i.kind==="directory")return{mode:o.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+i.kind)}},storeRemoteEntry:async(i,n,l)=>{let a=i.get(s.dirname(n)),u=t.isFile(l.mode)?await a.getFileHandle(s.basename(n),{create:!0}):await a.getDirectoryHandle(s.basename(n),{create:!0});if(u.kind==="file"){let d=await u.createWritable();await d.write(l.contents),await d.close()}i.set(n,u)},removeRemoteEntry:async(i,n)=>{await i.get(s.dirname(n)).removeEntry(s.basename(n)),i.delete(n)},reconcile:async(i,n,l)=>{let a=0,u=[];Object.keys(n.entries).forEach(function(m){let _=n.entries[m],N=l.entries[m];(!N||t.isFile(_.mode)&&_.timestamp.getTime()>N.timestamp.getTime())&&(u.push(m),a++)}),u.sort();let d=[];if(Object.keys(l.entries).forEach(function(m){n.entries[m]||(d.push(m),a++)}),d.sort().reverse(),!a)return;let h=n.type==="remote"?n.handles:l.handles;for(let m of u){let _=s.normalize(m.replace(i.mountpoint,"/")).substring(1);if(l.type==="local"){let N=h.get(_),j=await o.loadRemoteEntry(N);o.storeLocalEntry(m,j)}else{let N=o.loadLocalEntry(m);await o.storeRemoteEntry(h,_,N)}}for(let m of d)if(l.type==="local")o.removeLocalEntry(m);else{let _=s.normalize(m.replace(i.mountpoint,"/")).substring(1);await o.removeRemoteEntry(h,_)}}};e.FS.filesystems.NATIVEFS_ASYNC=o}y($e,"initializeNativeFS");var pt=y(async e=>{let t=[];async function r(o){for await(let i of o.values())t.push(i),i.kind==="directory"&&await r(i)}y(r,"collect"),await r(e);let s=new Map;s.set(".",e);for(let o of t){let i=(await e.resolve(o)).join("/");s.set(i,o)}return s},"getFsHandles");function Ce(e){let t={noImageDecoding:!0,noAudioDecoding:!0,noWasmDecoding:!1,preRun:He(e),quit(r,s){throw t.exited={status:r,toThrow:s},s},print:e.stdout,printErr:e.stderr,arguments:e.args,API:{config:e},locateFile:r=>e.indexURL+r,instantiateWasm:Be(e.indexURL)};return t}y(Ce,"createSettings");function Ue(e){return function(t){let r="/";try{t.FS.mkdirTree(e)}catch(s){console.error(`Error occurred while making a home directory '${e}':`),console.error(s),console.error(`Using '${r}' for a home directory instead`),e=r}t.FS.chdir(e)}}y(Ue,"createHomeDirectory");function We(e){return function(t){Object.assign(t.ENV,e)}}y(We,"setEnvironment");function qe(e){return t=>{for(let r of e)t.FS.mkdirTree(r),t.FS.mount(t.FS.filesystems.NODEFS,{root:r},r)}}y(qe,"mountLocalDirectories");function ze(e){let t=Fe(e);return r=>{let s=r._py_version_major(),o=r._py_version_minor();r.FS.mkdirTree("/lib"),r.FS.mkdirTree(`/lib/python${s}.${o}/site-packages`),r.addRunDependency("install-stdlib"),t.then(i=>{r.FS.writeFile(`/lib/python${s}${o}.zip`,i)}).catch(i=>{console.error("Error occurred while installing the standard library:"),console.error(i)}).finally(()=>{r.removeRunDependency("install-stdlib")})}}y(ze,"installStdlib");function He(e){let t;return e.stdLibURL!=null?t=e.stdLibURL:t=e.indexURL+"python_stdlib.zip",[ze(t),Ue(e.env.HOME),We(e.env),qe(e._node_mounts),$e]}y(He,"getFileSystemInitializationFuncs");function Be(e){let{binary:t,response:r}=Z(e+"pyodide.asm.wasm");return function(s,o){return async function(){try{let i;r?i=await WebAssembly.instantiateStreaming(r,s):i=await WebAssembly.instantiate(await t,s);let{instance:n,module:l}=i;typeof WasmOffsetConverter<"u"&&(wasmOffsetConverter=new WasmOffsetConverter(wasmBinary,l)),o(n,l)}catch(i){console.warn("wasm instantiation failed!"),console.warn(i)}}(),{}}}y(Be,"getInstantiateWasmFunc");var ve="0.26.2";async function Ve(e={}){var t,r;await me();let s=e.indexURL||await De();s=le(s),s.endsWith("/")||(s+="/"),e.indexURL=s;let o={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,lockFileURL:s+"pyodide-lock.json",args:[],_node_mounts:[],env:{},packageCacheDir:s,packages:[],enableRunUntilComplete:!1,checkAPIVersion:!0},i=Object.assign(o,e);(t=i.env).HOME??(t.HOME="/home/pyodide"),(r=i.env).PYTHONINSPECT??(r.PYTHONINSPECT="1");let n=Ce(i),l=n.API;if(l.lockFilePromise=je(i.lockFileURL),typeof _createPyodideModule!="function"){let m=`${i.indexURL}pyodide.asm.js`;await X(m)}let a;if(e._loadSnapshot){let m=await e._loadSnapshot;ArrayBuffer.isView(m)?a=m:a=new Uint8Array(m),n.noInitialRun=!0,n.INITIAL_MEMORY=a.length}let u=await _createPyodideModule(n);if(n.exited)throw n.exited.toThrow;if(e.pyproxyToStringRepr&&l.setPyProxyToStringMethod(!0),l.version!==ve&&i.checkAPIVersion)throw new Error(`Pyodide version does not match: '${ve}' <==> '${l.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);u.locateFile=m=>{throw new Error("Didn't expect to load any more file_packager files!")};let d;a&&(d=l.restoreSnapshot(a));let h=l.finalizeBootstrap(d);return l.sys.path.insert(0,l.config.env.HOME),h.version.includes("dev")||l.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${h.version}/full/`),l._pyodide.set_excepthook(),await l.packageIndexReady,l.initializeStreams(i.stdin,i.stdout,i.stderr),h}y(Ve,"loadPyodide");/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const he=Symbol("Comlink.proxy"),Je=Symbol("Comlink.endpoint"),Ye=Symbol("Comlink.releaseProxy"),K=Symbol("Comlink.finalizer"),Q=Symbol("Comlink.thrown"),Ge=e=>typeof e=="object"&&e!==null||typeof e=="function",mt={canHandle:e=>Ge(e)&&e[he],serialize(e){const{port1:t,port2:r}=new MessageChannel;return ie(e,t),[r,[r]]},deserialize(e){return e.start(),Ke(e)}},yt={canHandle:e=>Ge(e)&&Q in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},ge=new Map([["proxy",mt],["throw",yt]]);function ht(e,t){for(const r of e)if(t===r||r==="*"||r instanceof RegExp&&r.test(t))return!0;return!1}function ie(e,t=globalThis,r=["*"]){t.addEventListener("message",function s(o){if(!o||!o.data)return;if(!ht(r,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}const{id:i,type:n,path:l}=Object.assign({path:[]},o.data),a=(o.data.argumentList||[]).map(W);let u;try{const d=l.slice(0,-1).reduce((m,_)=>m[_],e),h=l.reduce((m,_)=>m[_],e);switch(n){case"GET":u=h;break;case"SET":d[l.slice(-1)[0]]=W(o.data.value),u=!0;break;case"APPLY":u=h.apply(d,a);break;case"CONSTRUCT":{const m=new h(...a);u=tt(m)}break;case"ENDPOINT":{const{port1:m,port2:_}=new MessageChannel;ie(e,_),u=et(m,[m])}break;case"RELEASE":u=void 0;break;default:return}}catch(d){u={value:d,[Q]:0}}Promise.resolve(u).catch(d=>({value:d,[Q]:0})).then(d=>{const[h,m]=re(d);t.postMessage(Object.assign(Object.assign({},h),{id:i}),m),n==="RELEASE"&&(t.removeEventListener("message",s),Xe(t),K in e&&typeof e[K]=="function"&&e[K]())}).catch(d=>{const[h,m]=re({value:new TypeError("Unserializable return value"),[Q]:0});t.postMessage(Object.assign(Object.assign({},h),{id:i}),m)})}),t.start&&t.start()}function gt(e){return e.constructor.name==="MessagePort"}function Xe(e){gt(e)&&e.close()}function Ke(e,t){return ce(e,[],t)}function Y(e){if(e)throw new Error("Proxy has been released and is not useable")}function Qe(e){return B(e,{type:"RELEASE"}).then(()=>{Xe(e)})}const ee=new WeakMap,te="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(ee.get(e)||0)-1;ee.set(e,t),t===0&&Qe(e)});function wt(e,t){const r=(ee.get(t)||0)+1;ee.set(t,r),te&&te.register(e,t,e)}function vt(e){te&&te.unregister(e)}function ce(e,t=[],r=function(){}){let s=!1;const o=new Proxy(r,{get(i,n){if(Y(s),n===Ye)return()=>{vt(o),Qe(e),s=!0};if(n==="then"){if(t.length===0)return{then:()=>o};const l=B(e,{type:"GET",path:t.map(a=>a.toString())}).then(W);return l.then.bind(l)}return ce(e,[...t,n])},set(i,n,l){Y(s);const[a,u]=re(l);return B(e,{type:"SET",path:[...t,n].map(d=>d.toString()),value:a},u).then(W)},apply(i,n,l){Y(s);const a=t[t.length-1];if(a===Je)return B(e,{type:"ENDPOINT"}).then(W);if(a==="bind")return ce(e,t.slice(0,-1));const[u,d]=be(l);return B(e,{type:"APPLY",path:t.map(h=>h.toString()),argumentList:u},d).then(W)},construct(i,n){Y(s);const[l,a]=be(n);return B(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:l},a).then(W)}});return wt(o,e),o}function bt(e){return Array.prototype.concat.apply([],e)}function be(e){const t=e.map(re);return[t.map(r=>r[0]),bt(t.map(r=>r[1]))]}const Ze=new WeakMap;function et(e,t){return Ze.set(e,t),e}function tt(e){return Object.assign(e,{[he]:!0})}function Et(e,t=globalThis,r="*"){return{postMessage:(s,o)=>e.postMessage(s,r,o),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function re(e){for(const[t,r]of ge)if(r.canHandle(e)){const[s,o]=r.serialize(e);return[{type:"HANDLER",name:t,value:s},o]}return[{type:"RAW",value:e},Ze.get(e)||[]]}function W(e){switch(e.type){case"HANDLER":return ge.get(e.name).deserialize(e.value);case"RAW":return e.value}}function B(e,t,r){return new Promise(s=>{const o=St();e.addEventListener("message",function i(n){!n.data||!n.data.id||n.data.id!==o||(e.removeEventListener("message",i),s(n.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),r)})}function St(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var _t=Object.freeze({__proto__:null,createEndpoint:Je,expose:ie,finalizer:K,proxy:tt,proxyMarker:he,releaseProxy:Ye,transfer:et,transferHandlers:ge,windowEndpoint:Et,wrap:Ke});function kt(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}),r}var rt={exports:{}},se={exports:{}},Ee;function Ot(){return Ee||(Ee=1,function(e,t){(function(r,s){e.exports=s()})(self,function(){return(()=>{var r={d:(c,f)=>{for(var p in f)r.o(f,p)&&!r.o(c,p)&&Object.defineProperty(c,p,{enumerable:!0,get:f[p]})},o:(c,f)=>Object.prototype.hasOwnProperty.call(c,f),r:c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}},s={};r.r(s),r.d(s,{isServiceWorkerRequest:()=>l,serviceWorkerFetchListener:()=>a,asyncSleep:()=>u,ServiceWorkerError:()=>d,writeMessageAtomics:()=>h,writeMessageServiceWorker:()=>m,writeMessage:()=>_,makeChannel:()=>N,makeAtomicsChannel:()=>j,makeServiceWorkerChannel:()=>R,readMessage:()=>E,syncSleep:()=>A,uuidv4:()=>F});var o=function(c,f,p,w){return new(p||(p=Promise))(function(v,g){function S(k){try{x(w.next(k))}catch(M){g(M)}}function O(k){try{x(w.throw(k))}catch(M){g(M)}}function x(k){var M;k.done?v(k.value):(M=k.value,M instanceof p?M:new p(function(D){D(M)})).then(S,O)}x((w=w.apply(c,[])).next())})};const i="__SyncMessageServiceWorkerInput__",n="__sync-message-v2__";function l(c){return typeof c!="string"&&(c=c.request.url),c.includes(i)}function a(){const c={},f={};return p=>{const{url:w}=p.request;return!!l(w)&&(p.respondWith(function(){return o(this,void 0,void 0,function*(){function v(g){const S={message:g,version:n};return new Response(JSON.stringify(S),{status:200})}if(w.endsWith("/read")){const{messageId:g,timeout:S}=yield p.request.json();if(g in c){const O=c[g];return delete c[g],v(O)}return yield new Promise(O=>{f[g]=O,setTimeout(function(){delete f[g],O(new Response("",{status:408}))},S)})}if(w.endsWith("/write")){const{message:g,messageId:S}=yield p.request.json(),O=f[S];return O?(O(v(g)),delete f[S]):c[S]=g,v({early:!O})}if(w.endsWith("/version"))return new Response(n,{status:200})})}()),!0)}}function u(c){return new Promise(f=>setTimeout(f,c))}class d extends Error{constructor(f,p){super(`Received status ${p} from ${f}. Ensure the service worker is registered and active.`),this.url=f,this.status=p,this.type="ServiceWorkerError",Object.setPrototypeOf(this,d.prototype)}}function h(c,f){const p=new TextEncoder().encode(JSON.stringify(f)),{data:w,meta:v}=c;if(p.length>w.length)throw new Error("Message is too big, increase bufferSize when making channel.");w.set(p,0),Atomics.store(v,0,p.length),Atomics.store(v,1,1),Atomics.notify(v,1)}function m(c,f,p){return o(this,void 0,void 0,function*(){yield navigator.serviceWorker.ready;const w=c.baseUrl+"/write",v=Date.now();for(;;){const g={message:f,messageId:p},S=yield fetch(w,{method:"POST",body:JSON.stringify(g)});if(S.status===200&&(yield S.json()).version===n)return;if(!(Date.now()-v<c.timeout))throw new d(w,S.status);yield u(100)}})}function _(c,f,p){return o(this,void 0,void 0,function*(){c.type==="atomics"?h(c,f):yield m(c,f,p)})}function N(c={}){return typeof SharedArrayBuffer<"u"?j(c.atomics):"serviceWorker"in navigator?R(c.serviceWorker):null}function j({bufferSize:c}={}){return{type:"atomics",data:new Uint8Array(new SharedArrayBuffer(c||131072)),meta:new Int32Array(new SharedArrayBuffer(2*Int32Array.BYTES_PER_ELEMENT))}}function R(c={}){return{type:"serviceWorker",baseUrl:(c.scope||"/")+i,timeout:c.timeout||5e3}}function b(c,f){return c>0?+c:f}function E(c,f,{checkInterrupt:p,checkTimeout:w,timeout:v}={}){const g=performance.now();w=b(w,p?100:5e3);const S=b(v,Number.POSITIVE_INFINITY);let O;if(c.type==="atomics"){const{data:x,meta:k}=c;O=()=>{if(Atomics.wait(k,1,0,w)==="timed-out")return null;{const M=Atomics.exchange(k,0,0),D=x.slice(0,M);Atomics.store(k,1,0);const V=new TextDecoder().decode(D);return JSON.parse(V)}}}else O=()=>{const x=new XMLHttpRequest,k=c.baseUrl+"/read";x.open("POST",k,!1);const M={messageId:f,timeout:w};x.send(JSON.stringify(M));const{status:D}=x;if(D===408)return null;if(D===200){const V=JSON.parse(x.responseText);return V.version!==n?null:V.message}if(performance.now()-g<c.timeout)return null;throw new d(k,D)};for(;;){const x=S-(performance.now()-g);if(x<=0)return null;w=Math.min(w,x);const k=O();if(k!==null)return k;if(p!=null&&p())return null}}function A(c,f){if(c=b(c,0))if(typeof SharedArrayBuffer<"u"){const p=new Int32Array(new SharedArrayBuffer(Int32Array.BYTES_PER_ELEMENT));p[0]=0,Atomics.wait(p,0,0,c)}else E(f,`sleep ${c} ${F()}`,{timeout:c})}let F;return F="randomUUID"in crypto?function(){return crypto.randomUUID()}:function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,c=>{const f=Number(c);return(f^crypto.getRandomValues(new Uint8Array(1))[0]&15>>f/4).toString(16)})},s})()})}(se)),se.exports}var xt=kt(_t);(function(e,t){(function(r,s){e.exports=s(Ot(),xt)})(self,function(r,s){return(()=>{var o={272:a=>{a.exports=s},746:a=>{a.exports=r}},i={};function n(a){var u=i[a];if(u!==void 0)return u.exports;var d=i[a]={exports:{}};return o[a](d,d.exports,n),d.exports}n.n=a=>{var u=a&&a.__esModule?()=>a.default:()=>a;return n.d(u,{a:u}),u},n.d=(a,u)=>{for(var d in u)n.o(u,d)&&!n.o(a,d)&&Object.defineProperty(a,d,{enumerable:!0,get:u[d]})},n.o=(a,u)=>Object.prototype.hasOwnProperty.call(a,u),n.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var l={};return(()=>{n.r(l),n.d(l,{InterruptError:()=>h,NoChannelError:()=>m,SyncClient:()=>_,syncExpose:()=>N});var a=n(746),u=n(272),d=function(R,b,E,A){return new(E||(E=Promise))(function(F,c){function f(v){try{w(A.next(v))}catch(g){c(g)}}function p(v){try{w(A.throw(v))}catch(g){c(g)}}function w(v){var g;v.done?F(v.value):(g=v.value,g instanceof E?g:new E(function(S){S(g)})).then(f,p)}w((A=A.apply(R,[])).next())})};class h extends Error{constructor(){super(...arguments),this.type="InterruptError",this.name=this.type}}class m extends Error{constructor(){super(...arguments),this.type="NoChannelError",this.name=this.type}}class _{constructor(b,E){this.workerCreator=b,this.channel=E,this.state="idle",this._messageIdBase="",this._messageIdSeq=0,this._start()}interrupt(){return d(this,void 0,void 0,function*(){this.state!=="idle"&&(this.state!=="awaitingMessage"&&this.state!=="sleeping"?this.interrupter?yield this.interrupter():(this.terminate(),this._start()):yield this._writeMessage({interrupted:!0}))})}call(b,...E){return d(this,void 0,void 0,function*(){if(this.state!=="idle")throw new Error(`State is ${this.state}, not idle`);let A=!0;this.state="running",this._messageIdBase=(0,a.uuidv4)(),this._messageIdSeq=0;const F=c=>{var f;A&&c!=="init"&&(c==="reading"?(this.state="awaitingMessage",this._messageIdSeq++,(f=this._awaitingMessageResolve)===null||f===void 0||f.call(this)):c==="sleeping"?(this.state="sleeping",this._messageIdSeq++):c==="slept"&&(this.state="running"))};this._interruptPromise=new Promise((c,f)=>this._interruptRejector=f);try{return yield Promise.race([b(this.channel,u.proxy(F),this._messageIdBase,...E),this._interruptPromise])}finally{A=!1,this._reset()}})}writeMessage(b){return d(this,void 0,void 0,function*(){if(this.state==="idle"||!this._messageIdBase)throw new Error("No active call to send a message to.");if(this.state!=="awaitingMessage"){if(this._awaitingMessageResolve)throw new Error("Not waiting for message, and another write is already queued.");yield new Promise(E=>{this._awaitingMessageResolve=E}),delete this._awaitingMessageResolve}yield this._writeMessage({message:b})})}terminate(){var b;(b=this._interruptRejector)===null||b===void 0||b.call(this,new h("Worker terminated")),this.workerProxy[u.releaseProxy](),this.worker.terminate(),delete this.workerProxy,delete this.worker}_writeMessage(b){return d(this,void 0,void 0,function*(){this.state="running";const E=j(this._messageIdBase,this._messageIdSeq);yield(0,a.writeMessage)(this.channel,b,E)})}_start(){this._reset(),this.worker=this.workerCreator(),this.workerProxy=u.wrap(this.worker)}_reset(){this.state="idle",delete this._interruptPromise,delete this._interruptRejector,delete this._awaitingMessageResolve,delete this._messageIdBase}}function N(R){return function(b,E,A,...F){return d(this,void 0,void 0,function*(){yield E("init");let c=0;function f(p,w){if(!b)throw new m;E(p);const v=j(A,++c),g=(0,a.readMessage)(b,v,w);if(g){const{message:S,interrupted:O}=g;if(O)throw new h;return S}p==="sleeping"&&E("slept")}return R({channel:b,readMessage:()=>f("reading"),syncSleep(p){p>0&&f("sleeping",{timeout:p})}},...F)})}}function j(R,b){return`${R}-${b}`}})(),l})()})})(rt);var Se=rt.exports;async function Pt(){let e=await Ve({indexURL:"/webhidmouse./pyodide"});return await e.runPythonAsync(`
    from pyodide.http import pyfetch
    from asyncio import gather
    import os
    def safe_open_wb(path):
      ''' Open "path" for writing, creating any parent directories as needed.
      '''
      p = os.path.dirname(path)
      if p:
        os.makedirs(p, exist_ok=True)
      return open(path, 'wb')
    async def fetch_py(root, filename):
      print(f'fetching py file {filename}')
      response = await pyfetch(root + filename)
      with safe_open_wb(filename) as f:
        f.write(await response.bytes())
  
    py_files = 'webhid.py qdrazer/device.py qdrazer/protocol.py basilisk_v3/device.py'
    py_files = py_files.split(' ')
    await gather(*[fetch_py('/webhidmouse' + 'py/', fn) for fn in py_files])
  `),await e.runPythonAsync(`
    import shutil
    shutil.copy('webhid.py', 'hid.py')
  `),await e.runPythonAsync("import hid"),e}var T=null,ue=null,de=null;function Mt(e){if(!ue||!de)throw new Error("no sync extras and notify callback");de("await_js",e);const[t,r]=ue.readMessage();if(!t)throw new Error(r);return r}var G=null;ie({init:async()=>{T=await Pt()},setStdout:e=>{if(T===null)throw new Error("pyodide is not initialized");T.setStdout({batched:t=>e("print",t)})},runPython:Se.syncExpose(async(e,t,r,s)=>{if(T===null)throw new Error("pyodide is not initialized");G===null&&(G=T.toPy({})),ue=e,de=s,r=r??{};const o=r.repr;delete r.repr;const i=r.add;delete r.add,r.globals=T.toPy(r.globals)??G,i&&r.globals.update(T.toPy(i)),r.globals.set("syncExtras",e),r.globals.set("notifyCallback",s),r.globals.set("await_js",Mt),r.locals=T.toPy(r.locals);const n=await T.runPythonAsync(t,r);return G.set("_result",n),o?T.runPython("repr(result)",{locals:T.toPy({result:n})}):n&&n.toJs?n.toJs({dict_converter:Object.fromEntries}):n}),runTest:Se.syncExpose((e,t)=>{t("world"),e.readMessage(),t("hello"),e.readMessage()})})});export default Rt();
