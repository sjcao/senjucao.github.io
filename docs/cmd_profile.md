# Profile 命令列表

巴蛇V3鼠标板载内存中可以存5个 profile，分别是白/红/绿/蓝/青，编号分别为 1~5。读取的时候，会读取对应 profile 里的设置。

此外还有一个特殊的 profile 编号，我叫作 direct，编号为0。编号为0的话，设置立即生效，鼠标断电就会重置，不会保存到板载内存中。

## get_profile_total_count

| 读命令 | 写命令 | 读取参数长度 | 数据参数长度 |
| ------ | ------ | ------------ | ------------ |
| 0x058a | -      | 0            | 1            |

读取总共有几个 profile，巴蛇V3鼠标应该会返回5

## get_profile_available_count

| 读命令 | 写命令 | 读取参数长度 | 数据参数长度 |
| ------ | ------ | ------------ | ------------ |
| 0x0580 | -      | 0            | 1            |

读取当前启用了几个 profile。

## get_profile_list

| 读命令 | 写命令 | 读取参数长度 | 数据参数长度 |
| ------ | ------ | ------------ | ------------ |
| 0x0581 | -      | 0            | 1+count      |

读取当前启用的 profile 列表。数据参数第一个字节固定是 profile 总个数(5)。然后接下来 count 个字节是启用的 profile 编号。count 就是使用 `get_profile_available_count` 获取的值。

## new_profile

| 读命令 | 写命令 | 读取参数长度 | 数据参数长度 |
| ------ | ------ | ------------ | ------------ |
| -      | 0x0502 | 0            | 1            |

建立(启用)新的 profile，参数是要新建的 profile 编号。

刚刚建立了以后，里面的设置我不确定是什么，为了确保这个新建的 profile 是默认设置，可以建立完以后再对该 profile 编号重新写入一遍各个设置。

## delete_profile

| 读命令 | 写命令 | 读取参数长度 | 数据参数长度 |
| ------ | ------ | ------------ | ------------ |
| -      | 0x0502 | 0            | 1            |

删除(禁用)某个 profile，参数是 profile 编号。和上一个类似。

## get_profile_info

| 读命令 | 写命令 | 读取参数长度 | 数据参数长度 |
| ------ | ------ | ------------ | ------------ |
| 0x0588 | 0x0508 | 1(profile)+2(start) | 2(length)+length(data) |

读取或写入 profile 的描述信息。这个描述信息是雷蛇软件用的，里面以某种编码方式包括了 profile 的名字、ID、电脑名字等。这个如果是自己实现板载内存读写，不需要和雷蛇软件兼容的话，可以不设置，对鼠标功能没有什么影响。

因为数据比较长，这个读写是分块读写的，读取参数中的 start 就是开始位置的字节数，返回的数据参数里面包括该块的长度和数据。 [qdrazer/device.py](../public/py/qdrazer/device.py) 中有分块拼接的算法，可以参考。

写入时应该只可以在刚刚新建完 profile 的时候写入，之后就不能写入了。
